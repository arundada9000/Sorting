<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Sort</title>
    <link rel="icon" href="./s.png" type="image/x-icon">
    <link rel="stylesheet" href="./styles.css">
</head>

<body>
    <div class="container">
        <h1>Bubble Sort</h1>

        <div class="sort-input flex">

            <input type="text" id="input-num" label="Enter numbers" title="Enter numbers separated with commas"
                placeholder="Enter numbers separated with commas">

            <button id="sort-btn" class="sort-btn">Sort</button>
        </div>

        <div class="passesandinfo flex">
            <div class="numbers" id="num-div">

            </div>

            <div class="passes" id="passes"></div>

            <div class="buttons-div"><button id="fast-btn" class="control-btn">Fast Visualization</button>
                <button id="skip" class="control-btn">Skip Visualization</button>
            </div>

            <div class="howto" id="howto">
                <div class="qs">
                    <h3>How to use ?</h3>
                    <button class="show">+</button>
                    <button class="hide">-</button>
                </div>
                <div class="ans">
                    <p>
                        Enter an array separated by commas as : 1,2,4,3,5 then press enter or Sort button. Sorting will
                        start
                        and
                        you can watch each pass as it gets sorted.
                        When it shows green it means the two of them are
                        being
                        compared
                        when red shows, it means the left number is greater than right number so it needs swapping
                        The blue color means the number is
                        at its
                        correct position and thus sorted
                        it will continue to check other numbers until it reaches end.
                    </p>
                </div>
            </div>

        </div>

        <div class="sorting-algorithm-container">
            <h1 class="algorithm-title">Bubble Sort Overview</h1>

            <section class="history">
                <h2 class="section-title">History</h2>
                <p>Bubble sort is one of the simplest sorting algorithms, often introduced in computer science
                    education. It was first documented in the 1950s and has been widely used in programming for
                    educational purposes due to its straightforward concept.</p>
            </section>

            <section class="current-uses">
                <h2 class="section-title">Current Uses</h2>
                <ul>
                    <li><strong>Educational Purposes:</strong> Commonly used to teach the basics of sorting algorithms.
                    </li>
                    <li><strong>Small Data Sets:</strong> Occasionally used for small datasets where efficiency is not a
                        concern.</li>
                    <li><strong>Data Analysis:</strong> Sometimes utilized in data analysis tasks when simplicity is
                        preferred.</li>
                </ul>
            </section>

            <section class="complexity">
                <h2 class="section-title">Time and Space Complexity</h2>
                <h3>Time Complexity</h3>
                <ul>
                    <li><strong>Best Case:</strong> <code>O(n)</code> – When the array is already sorted.</li>
                    <li><strong>Average Case:</strong> <code>O(n<sup>2</sup>)</code> – Quadratic complexity for average
                        cases.
                    </li>
                    <li><strong>Worst Case:</strong> <code>O(n<sup>2</sup>)</code> – When the array is sorted in reverse
                        order.
                    </li>
                </ul>
                <h3>Space Complexity</h3>
                <p><strong>Space Complexity:</strong> <code>O(1)</code> – It is an in-place sorting algorithm requiring
                    a constant amount of additional space.</p>
            </section>

            <section class="pseudo-code">
                <h2 class="section-title">Pseudo Code</h2>
                <pre><code>
    function bubbleSort(arr):
        n = length(arr)
        for i from 0 to n-1:
            for j from 0 to n-i-1:
                if arr[j] > arr[j + 1]:
                    // swap arr[j] and arr[j + 1]
                    temp = arr[j]
                    arr[j] = arr[j + 1]
                    arr[j + 1] = temp
        return arr
                </code></pre>
            </section>

            <section class="characteristics">
                <h2 class="section-title">Key Characteristics</h2>
                <ul>
                    <li><strong>Stability:</strong> Bubble sort is a stable sorting algorithm.</li>
                    <li><strong>Adaptability:</strong> Performs better on nearly sorted datasets.</li>
                </ul>
            </section>

            <section class="summary">
                <h2 class="section-title">Summary</h2>
                <p>Bubble sort is an easy-to-understand sorting algorithm that works by repeatedly swapping adjacent
                    elements. While it is inefficient for large datasets with its <code>O(n<sup>2</sup>)</code>
                    worst-case
                    complexity, its simplicity makes it suitable for educational purposes.</p>
            </section>
        </div>
    </div>

    <script>
        const sortBtn = document.getElementById("sort-btn");
        const inputBox = document.getElementById("input-num");
        const passesDiv = document.getElementById("passes");
        const howto = document.getElementById("howto");
        const skipBtn = document.getElementById("skip");
        const fastBtn = document.getElementById("fast-btn");

        let ms = 1000;

        fastBtn.addEventListener("click", () => {
            ms = ms > 5 ? Math.abs(ms - 199) : ms = 5;
            ms <= 5 ? fastBtn.style.display = "none" : 1;
            console.log(ms);

        });

        skipBtn.addEventListener("click", () => {
            ms = 0;
            displayBtn("none");
        });

        function displayBtn(dis) {
            fastBtn.style.display = dis;
            skipBtn.style.display = dis;
        }

        inputBox.addEventListener("keyup", (event) => {
            if (event.key === "Enter" && sortBtn.textContent === "Sort")
                sortBtn.click();
        })

        sortBtn.addEventListener("click", () => {
            if (sortBtn.textContent == "Sorting...") return;
            let input = inputBox.value;
            if (input == "") {
                alert("Please enter some values ! ");
                return;
            }
            ms = 1000;
            displayBtn("inline");
            sortBtn.textContent = "Sorting...";

            const values = input.split(',');
            console.log(values);

            const numDiv = document.getElementById("num-div");
            numDiv.innerHTML = "";
            passesDiv.innerHTML = "";
            howto.innerHTML = "";
            howto.style.visibility = "hidden";

            for (let i = 0; i < values.length; i++) {
                let li = document.createElement("div");
                li.className = "num";
                li.textContent = values[i];
                numDiv.appendChild(li);
                values[i] = parseFloat(values[i]);
            }
            const divs = document.querySelectorAll(".num");
            bubbleSort();

            async function bubbleSort() {
                for (let i = 0; i < values.length; i++) {
                    let j;
                    for (j = 0; j < values.length - i - 1; j++) {

                        toggleClass(divs, j, "comparing");
                        await sleep(ms);

                        if (values[j] > values[j + 1]) {
                            let temp = values[j];
                            values[j] = values[j + 1];
                            values[j + 1] = temp;

                            toggleClass(divs, j, "swapping");
                            await sleep(ms);
                            toggleClass(divs, j, "comparing");

                            temp = divs[j].textContent;
                            divs[j].textContent = divs[j + 1].textContent;
                            divs[j + 1].textContent = temp;
                            await sleep(ms);
                            toggleClass(divs, j, "swapping");
                            continue;
                        }

                        await sleep(ms);
                        toggleClass(divs, j, "comparing");
                    }

                    divs[j].classList.add("sorted");
                    let passCount = i + 1;
                    let passes = createDiv("numbers", "num", values, values.length, j, passCount);
                    passesDiv.appendChild(passes);
                }
                console.log(values);
                sortedArray = values.join(", ");
                howto.style.visibility = "visible";
                howto.textContent = "The array is successfully sorted.There were " + values.length + " numbers and it took " + (values.length - 1) + " passes.The sorted array is : " + sortedArray;

                const btn = document.createElement("button");
                btn.textContent = "Copy";
                btn.className = "copy-btn";
                btn.addEventListener("click", () => {
                    navigator.clipboard.writeText(sortedArray);
                    alert("Sorted array copied to clipboard")
                });
                howto.appendChild(btn);

                displayBtn("none");
                sortBtn.textContent = "Sort";
            }
        });

        function createDiv(cn1, cn2, content, time, j, passCount) {
            const outerDiv = document.createElement("div");
            outerDiv.className = cn1;

            const li = document.createElement("div");
            li.className = cn2;
            if (passCount == time)
                li.textContent = "Sorted ";
            else
                li.textContent = "Pass " + passCount;
            outerDiv.appendChild(li);

            for (let i = 0; i < time; i++) {
                const li = document.createElement("div");
                li.className = cn2;
                if (j <= i)
                    li.classList.add("sorted");
                li.textContent = content[i];
                outerDiv.appendChild(li);
            }

            return outerDiv;
        }

        function toggleClass(divs, j, cn) {
            divs[j].classList.toggle(cn);
            divs[j + 1].classList.toggle(cn);
        }

        function sleep(ms) {
            if (ms > 0)
                return new Promise(resolve => setTimeout(resolve, ms));
            else return;
        }

        //For accordian 
        let item = document.getElementsByClassName("howto");
        let show = document.getElementsByClassName("show");
        let hide = document.getElementsByClassName("hide");


        for (let i = 0; i < item.length; i++) {
            item[i].addEventListener("click", () => {
                let res = item[i].classList.toggle("active");
                if (res == true) {
                    show[i].style.display = "none";
                    hide[i].style.display = "block";

                } else {
                    show[i].style.display = "block";
                    hide[i].style.display = "none";
                }
            })
        }
    </script>

</body>

</html>